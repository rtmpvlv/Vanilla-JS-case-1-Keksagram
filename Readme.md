# Личный проект «Кекстаграм»

Разработан студентом: [Артем Павлов](https://github.com/rtmpvlv).

Кекстаграм — сервис просмотра изображений. Пользователям предоставлена возможность загружать свои фотографии или просматривать фотографии, загруженные ранее другими пользователями.

Описание функциональности

# 1. Загрузка нового изображения на сайт и заполнение информации о нём:

1.1. Загрузка нового изображения:
- выбор файла с изображением для загрузки;
- изменение масштаба изображения;
- применение одного из заранее заготовленных эффектов;
- выбор глубины эффекта с помощью ползунка;
- добавление текстового комментария;
- добавление хэш-тегов.

1.2. Выбор изображения для загрузки осуществляется с помощью стандартного контрола загрузки файла, который стилизован под букву «О» в логотипе. После выбора изображения, показывается форма редактирования изображения.

1.3 Закрытие формы редактирования изображения производится либо нажатием на кнопку-крестик, либо нажатием клавиши Esc.

# 2. Редактирование изображения и ограничения, накладываемые на поля

2.1. Масштаб:
При нажатии на кнопки "+" и "-" изменяется значение поля масштаба. Значение изменяется с шагом в 25%. Максимальное значение — 100%, минимальное — 25%. Значение по умолчанию — 100%. При изменении значения поля масштаба изображению внутри добавляется соответствующий стиль CSS, который задаёт масштаб.

2.2. Наложение эффекта на изображение:
По умолчанию выбран эффект «Оригинал».
На изображение может накладываться только один эффект.
При смене эффекта, выбором одного из значений среди радиокнопок, картинке добавляется CSS-класс, соответствующий эффекту.
Интенсивность эффекта регулируется перемещением ползунка в слайдере. Слайдер реализуется сторонней библиотекой noUiSlider. При изменении уровня интенсивности эффекта (предоставляется API слайдера), CSS-стили картинки обновляются следующим образом:
- Для эффекта «Хром» — filter: grayscale(0..1) с шагом 0.1;
- Для эффекта «Сепия» — filter: sepia(0..1) с шагом 0.1;
- Для эффекта «Марвин» — filter: invert(0..100%) с шагом 1%;
- Для эффекта «Фобос» — filter: blur(0..3px) с шагом 0.1px;
- Для эффекта «Зной» — filter: brightness(1..3) с шагом 0.1;
- Для эффекта «Оригинал» CSS-стили filter удаляются.
При выборе эффекта «Оригинал» слайдер скрывается.
При переключении эффектов, уровень насыщенности сбрасывается до начального значения (100%): слайдер, CSS-стиль изображения и значение поля  обновляется.

2.3. Хэш-теги:
- хэш-тег начинается с символа # (решётка);
- строка после решётки состоит из букв и чисел и не может содержать пробелы, спецсимволы (#, @, $ и т. п.), символы пунктуации (тире, дефис, запятая и т. п.), эмодзи и т. д.;
- хеш-тег не может состоять только из одной решётки;
- максимальная длина одного хэш-тега 20 символов, включая решётку;
- хэш-теги нечувствительны к регистру: #ХэшТег и #хэштег считаются одним и тем же тегом;
- хэш-теги разделяются пробелами;
- один и тот же хэш-тег не может быть использован дважды;
- нельзя указать больше пяти хэш-тегов;
- хэш-теги необязательны;
- если фокус находится в поле ввода хэш-тега, нажатие на Esc не должно приводить к закрытию формы редактирования изображения.

2.4. Комментарий:
- комментарий не обязателен;
- длина комментария не может составлять больше 140 символов;
- если фокус находится в поле ввода комментария, нажатие на Esc не должно приводить к закрытию формы редактирования изображения.

# 3. Отправка данных на сервер

3.1. После заполнения всех данных, при нажатии на кнопку «Отправить», все данные из формы, включая изображения, с помощью AJAX-запроса отправляются на сервер https://23.javascript.pages.academy/kekstagram методом POST с типом multipart/form-data.

3.2. Страница реагирует на неправильно введённые значения в форму. Если данные, введённые в форму, не соответствуют ограничениям, указанным в пунктах 2.3 и  2.4, форму невозможно отправить на сервер. При попытке отправить форму с неправильными данными, отправки не происходит, а неверно заполненные поля подсвечиваются красной рамкой. Способ добавления рамки и её стиль произвольные.

3.3. При успешной отправке формы форма редактирования изображения закрывается, все данные, введённые в форму, и контрол фильтра приходят в исходное состояние:

- масштаб возвращается к 100%;
- эффект сбрасывается на «Оригинал»;
- поля для ввода хэш-тегов и комментария очищаются;
- поле загрузки фотографии, стилизованное под букву «О» в логотипе, очищается.

3.4. Если отправка данных прошла успешно, показывается соответствующее сообщение. Сообщение исчезает после нажатия на кнопку "Круто", по нажатию на клавишу Esc и по клику на произвольную область экрана за пределами блока с сообщением.

3.5. Если при отправке данных произошла ошибка запроса, показывается соответствующее сообщение. Сообщение исчезает после нажатия на кнопку "Загрузить другой файл", по нажатию на клавишу Esc и по клику на произвольную область экрана за пределами блока с сообщением.

3.6. Нажатие на кнопку "Загрузить другой файл" приводит к закрытию формы и возвращению всех данных и контрола фильтра к исходному состоянию (описано в пункте 3.3). Поле загрузки фотографии, стилизованное под букву «О» в логотипе, очищается.

# 4. Просмотр загруженных изображений

4.1. Загрузка изображений от других пользователей производится сразу после открытия страницы с удалённого сервера.

4.2. Если при загрузке данных с сервера произошла ошибка запроса, показывается соответствующее сообщение.

4.3. Все загруженные изображения показаны на главной странице в виде миниатюр.

4.4. При нажатии на любую из миниатюр, показывается блок, содержащий полноэкранное изображение с количеством лайков и комментариев.

4.5. Выход из полноэкранного режима просмотра фотографии осуществляется либо нажатием на иконку крестика в правом верхнем углу блока, либо нажатием на клавишу Esc.

4.6. Все комментарии к изображению выводятся в блок комментариев. Сразу после открытия изображения в полноэкранном режиме отображается не более 5 комментариев. Количество показанных комментариев и общее число комментариев отображается в блоке счетчика комментариев. Аватарка автора комментария отображается в блоке аватарки. Имя автора комментария отображается в атрибуте alt его аватарки. Текст комментария выводится в блоке текста комментария.

4.7. Отображение дополнительных комментариев происходит при нажатии на кнопку "Загрузить еще". При нажатии на кнопку отображается не более 5 новых комментариев. При изменении количества показанных комментариев число показанных комментариев в блоке счетчика комментариев также изменяется.

4.8. Если все комментарии показаны, кнопка "Загрузить ещё" скрывается.

# 5. Фильтрация изображений от других пользователей

5.1. Доступные фильтры:
- «По умолчанию» — фотографии в изначальном порядке с сервера;
- «Случайные» — 10 случайных, не повторяющихся фотографий;
- «Обсуждаемые» — фотографии, отсортированные в порядке убывания количества комментариев.

5.2. Блок, с помощью которого производится фильтрация фотографий, скрыт изначально и показывается только после окончания загрузки всех фотографий.

5.3. При переключении фильтров, отрисовка изображений, подходящих под новый фильтр, выполняется не чаще, чем один раз 500 мс (устранение дребезга).

# 6. Дополнительная  функциональность

6.1. После выбора изображения пользователем с помощью стандартного контрола загрузки файла, оно подставляется в форму редактирования вместо тестового изображения. Также изображение добавляется в превью фильтров.
